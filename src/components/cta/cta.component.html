
<!-- Call to Action -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <div class="text-center mt-16 md:mt-24 py-16 border-t border-slate-200 reveal relative">
    <h2 class="font-serif text-3xl sm:text-4xl font-bold text-slate-900 mb-4">Have a Question?</h2>
    <p class="text-slate-600 max-w-2xl mx-auto mb-8 leading-relaxed">
      Ready to take control of your finances? Reach out today for a personalized consultation. We're here to help you achieve your financial goals.
    </p>
    <div class="flex flex-col items-center gap-6">
      <button (click)="openContactModal()" class="bg-slate-900 text-white font-semibold py-4 px-10 rounded-full text-lg transition-all duration-300 ease-in-out hover:bg-slate-700 hover:shadow-xl hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500">
        Get in Touch
      </button>

      <!-- Admin Access Button -->
      <button (click)="openAdminModal()" class="text-slate-400 hover:text-slate-700 text-xs font-medium uppercase tracking-widest flex items-center gap-2 transition-colors duration-300">
        <i data-lucide="lock" class="w-3 h-3"></i>
        <span>Access</span>
      </button>
    </div>
  </div>
</div>

<!-- Contact Form Modal -->
@if (isContactModalVisible()) {
  <div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm" (click)="closeContactModal()">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg m-4 transform transition-all" (click)="$event.stopPropagation()">
      @if (!submissionSuccess()) {
        <!-- Form View -->
        <div>
          <h3 class="text-2xl font-bold text-slate-900 mb-2">Contact Us</h3>
          <p class="text-slate-500 mb-6">Fill out the form below and we'll get back to you shortly.</p>
          <form (submit)="$event.preventDefault(); handleFormSubmit()">
            <div class="space-y-4">
              <div>
                <label for="name" class="block text-sm font-medium text-slate-700 mb-1">Name</label>
                <input type="text" id="name" [value]="contactName()" (input)="contactName.set($any($event.target).value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition" [class.border-red-500]="formErrors()['name']">
                @if (formErrors()['name']) { <p class="text-red-500 text-xs mt-1">{{ formErrors()['name'] }}</p> }
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-slate-700 mb-1">Email</label>
                <input type="email" id="email" [value]="contactEmail()" (input)="contactEmail.set($any($event.target).value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition" [class.border-red-500]="formErrors()['email']">
                @if (formErrors()['email']) { <p class="text-red-500 text-xs mt-1">{{ formErrors()['email'] }}</p> }
              </div>
              <div>
                <label for="subject" class="block text-sm font-medium text-slate-700 mb-1">Subject</label>
                <input type="text" id="subject" [value]="contactSubject()" (input)="contactSubject.set($any($event.target).value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition" [class.border-red-500]="formErrors()['subject']">
                @if (formErrors()['subject']) { <p class="text-red-500 text-xs mt-1">{{ formErrors()['subject'] }}</p> }
              </div>
              <div>
                <label for="message" class="block text-sm font-medium text-slate-700 mb-1">Message</label>
                <textarea id="message" rows="4" [value]="contactMessage()" (input)="contactMessage.set($any($event.target).value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none transition" [class.border-red-500]="formErrors()['message']"></textarea>
                @if (formErrors()['message']) { <p class="text-red-500 text-xs mt-1">{{ formErrors()['message'] }}</p> }
              </div>
            </div>
            <div class="flex justify-end gap-3 mt-8">
              <button type="button" (click)="closeContactModal()" class="px-5 py-2 text-sm font-medium text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors">Cancel</button>
              <button type="submit" [disabled]="isSubmitting()" class="px-5 py-2 text-sm font-medium text-white bg-slate-900 rounded-lg hover:bg-slate-700 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center">
                @if (isSubmitting()) {
                  <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span>Sending...</span>
                } @else {
                  <span>Send Message</span>
                }
              </button>
            </div>
          </form>
        </div>
      } @else {
        <!-- Success View -->
        <div class="text-center py-8">
          <div class="w-20 h-20 mx-auto flex items-center justify-center bg-green-100 rounded-full mb-6">
            <i data-lucide="check" class="w-10 h-10 text-green-600"></i>
          </div>
          <h3 class="text-2xl font-bold text-slate-900 mb-2">Message Sent!</h3>
          <p class="text-slate-500 mb-8">Thank you for reaching out. We'll get back to you as soon as possible.</p>
          <button (click)="closeContactModal()" class="px-8 py-2 text-sm font-medium text-white bg-slate-900 rounded-lg hover:bg-slate-700 transition-colors">Close</button>
        </div>
      }
    </div>
  </div>
}

<!-- Admin Access Modal -->
<div 
  class="fixed inset-0 z-[100] flex items-center justify-center transition-all duration-300"
  [class.pointer-events-none]="!isAdminModalVisible()"
  [class.opacity-0]="!isAdminModalVisible()"
  [class.opacity-100]="isAdminModalVisible()">
  
  <!-- Backdrop -->
  <div class="absolute inset-0 bg-[#0a2540]/60 backdrop-blur-md transition-opacity duration-300" (click)="closeAdminModal()"></div>

  <!-- Modal Content -->
  <div 
    class="bg-white rounded-2xl shadow-2xl w-full max-w-md m-4 relative overflow-hidden transform transition-all duration-300 cubic-bezier(0.16, 1, 0.3, 1) border border-[#dee2e6]"
    [class.scale-95]="!isAdminModalVisible()"
    [class.translate-y-8]="!isAdminModalVisible()"
    [class.scale-100]="isAdminModalVisible()"
    [class.translate-y-0]="isAdminModalVisible()"
    (click)="$event.stopPropagation()">
    
    <!-- Header -->
    <div class="bg-[#f8f9fa] px-8 py-6 border-b border-[#dee2e6] flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-700">
          <i data-lucide="users" class="w-5 h-5"></i>
        </div>
        <h3 class="text-xl font-serif font-bold text-[#0a2540]">Response System</h3>
      </div>
      <button (click)="closeAdminModal()" class="text-[#6c757d] hover:text-[#0a2540] transition-colors p-2 rounded-full hover:bg-[#e9ecef]">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>

    <!-- Body -->
    <div class="p-8">
      <p class="text-[#495057] mb-6 text-sm leading-relaxed">
        Please verify your identity to view client responses.
      </p>
      
      <div class="relative mb-2">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <i data-lucide="key" class="w-5 h-5 text-[#adb5bd] transition-colors" [class.text-red-400]="adminErrorMessage()"></i>
        </div>
        <input 
          type="password" 
          [value]="adminPasswordInput()" 
          (input)="adminPasswordInput.set($any($event.target).value); adminErrorMessage.set('')" 
          (keydown)="handleAdminKey($event)" 
          placeholder="Enter Admin Password" 
          class="w-full pl-10 pr-4 py-3 border border-[#dee2e6] rounded-lg focus:ring-2 focus:ring-[#0a2540] focus:border-[#0a2540] outline-none transition-all placeholder:text-[#adb5bd] text-[#0a2540] font-medium"
          [class.border-red-500]="adminErrorMessage()"
          [class.focus:border-red-500]="adminErrorMessage()"
          [class.focus:ring-red-500]="adminErrorMessage()"
          #adminPassInput>
      </div>

      @if (adminErrorMessage()) {
        <div class="flex items-center gap-2 text-red-600 text-xs font-medium mt-2 animate-pulse">
           <i data-lucide="alert-circle" class="w-3 h-3"></i>
           <span>{{ adminErrorMessage() }}</span>
        </div>
      }

      <div class="mt-8 flex justify-end gap-3">
        <button (click)="closeAdminModal()" class="px-5 py-2.5 text-sm font-medium text-[#495057] hover:text-[#0a2540] hover:bg-[#f8f9fa] rounded-lg transition-colors border border-transparent hover:border-[#e9ecef]">
          Cancel
        </button>
        <button (click)="verifyAdminPassword()" class="px-6 py-2.5 text-sm font-medium text-white bg-[#0a2540] rounded-lg hover:bg-[#0d3157] transition-all shadow-md hover:shadow-lg active:scale-95 flex items-center gap-2">
          <span>View Responses</span>
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </button>
      </div>
    </div>
  </div>
</div>
